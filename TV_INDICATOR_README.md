# Индикатор NIFTY OI для TradingView

Этот индикатор отображает данные об изменении открытого интереса (Open Interest) в различных временных интервалах для символа NIFTY.

## Настройка

### 1. Серверная часть на Render.com

Серверная часть уже настроена и работает на Render.com. API доступен по адресу:
```
https://dhan-oi-api.onrender.com/tv_data?symbol=NIFTY
```

#### Автоматическое обновление данных

Мы добавили специальный worker-процесс, который автоматически обновляет исторические данные OI каждую минуту. Это позволяет индикатору всегда отображать актуальные данные без необходимости настраивать алерты в TradingView.

Для проверки работы API вы можете открыть URL в браузере:
```
https://dhan-oi-api.onrender.com/tv_data?symbol=NIFTY
```

### 2. Настройка индикатора в TradingView

1. Откройте TradingView и войдите в свой аккаунт
2. Откройте график NIFTY или любого другого символа, для которого хотите использовать индикатор
3. Нажмите "Pine Editor" в нижней части экрана
4. Вставьте код из файла `tradingview_indicator.pine` в редактор
5. Нажмите "Save" и дайте индикатору название, например "NIFTY OI Changes"
6. Нажмите "Add to Chart", чтобы добавить индикатор на график

### 3. Настройка параметров индикатора

В настройках индикатора вы можете изменить:
1. API URL - адрес вашего сервера (по умолчанию https://dhan-oi-api.onrender.com/tv_data)
2. Интервал обновления - как часто индикатор будет обращаться к API (по умолчанию 60 секунд)
3. Таймфреймы - выберите 5 временных интервалов для анализа OI

### 4. Важное примечание об алертах (для TradingView Premium)

Благодаря автоматическому обновлению данных на сервере, **вам больше не нужно настраивать алерты** в TradingView для обновления данных. Индикатор будет получать актуальные данные при каждом обновлении графика.

Однако, если вы хотите дополнительное обновление данных, вы можете настроить алерт:
1. Condition: Time - Once per minute
2. Action: Webhook URL
3. URL: https://dhan-oi-api.onrender.com/tv_data?symbol=NIFTY&timeframes=15,45,75,120,240

## Интерпретация данных

Индикатор отображает таблицу с следующими данными:
- **TF**: временной интервал (15мин, 45мин, 75мин, 2ч, 4ч)
- **Change in price**: изменение цены в процентах
- **Change in OI**: изменение открытого интереса в процентах
- **Rvol**: относительный объем
- **Relationship**: цветовое обозначение отношения между изменением цены и OI

### Цветовая кодировка:
- **Зеленый**: положительное изменение OI (растущий интерес)
- **Красный**: отрицательное изменение OI (падающий интерес)

### Стратегия торговли:
1. **Рост цены + рост OI (зеленый)** = сильный бычий тренд
2. **Рост цены + падение OI (красный)** = слабый бычий тренд, возможен разворот
3. **Падение цены + рост OI (зеленый)** = сильный медвежий тренд
4. **Падение цены + падение OI (красный)** = слабый медвежий тренд, возможен разворот 